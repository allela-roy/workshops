jtype: Flow
with:
  protocol: grpc
  port: 12345
executors:
  - name: encoder
    uses: jinahub://CLIPEncoder/latest-gpu
    install_requirements: true
    replicas: 2
  - name: indexer
    uses: jinahub://AnnLiteIndexer
    uses_with:
      dim: 512
      metric: cosine
      #columns:
        #- ['year', 'int']
        #- ['productDisplayName', 'str']
        #- ['usage', 'str']
        #- ['subCategory', 'str']
        #- ['masterCategory', 'str']
        #- ['articleType', 'str']
        #- ['season', 'str']
        #- ['baseColour', 'str']
        #- ['gender', 'str']
    #workspace: workspace
    install_requirements: true
